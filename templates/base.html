{% load static %}
<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>–û–û–û –¢–æ—Ä–≥–æ–≤—ã–µ –ê–≤—Ç–æ–º–∞—Ç—ã - Demo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  {% block link %}{% endblock %}
</head>
<body>
  <div id="app">
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-top"> 
        <div class="logo">
          <div class="brand"> 
            <div class="brand-line1">–û–û–û</div> 
            <div class="brand-line2">–¢–æ—Ä–≥–æ–≤—ã–µ –ê–≤—Ç–æ–º–∞—Ç—ã</div> 
          </div> 
        </div> 
        <button id="sidebar-toggle" class="hamburger" aria-label="Toggle menu">‚ò∞</button>
      </div>

      <nav class="nav"> 
        {% if not user.is_authenticated %}
          <a class="nav-item {% if request.path == '/register/' %}active{% endif %}" href="/register/">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ñ—Ä–∞–Ω—á–∞–π–∑–∏</a>
          <a class="nav-item" href="{% url 'login' %}">–í–æ–π—Ç–∏</a>
        {% else %}
          <a class="nav-item {% if request.path == '/' %}active{% endif %}" href="/">–ì–ª–∞–≤–Ω–∞—è</a> 
          {% with request.path|slice:":3" as p3 %} 
            <a class="nav-item {% if p3 == '/ta' %}active{% endif %}" href="/ta/">–¢–æ—Ä–≥–æ–≤—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã</a> 
          {% endwith %} 
        {% endif %} 
        <hr class="nav-sep"> 
      </nav> 
      <div class="sidebar-footer"> 
      </div>
    </aside>

    <div class="main">
      <!-- TOPBAR: –∑–∞–º–µ–Ω–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π header —ç—Ç–∏–º –±–ª–æ–∫–æ–º -->
      <header class="topbar">
        <div class="topbar-left">
          <h1 class="app-title">–û–û–û –¢–æ—Ä–≥–æ–≤—ã–µ –ê–≤—Ç–æ–º–∞—Ç—ã</h1>
        </div>

        <div class="topbar-right">
          <!-- –∫–Ω–æ–ø–∫–∞ "–∫–æ–ª–æ–∫–æ–ª—å—á–∏–∫" - —Ü–µ–Ω—Ç—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
          <div class="notif-toggle" id="notif-toggle" title="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è" aria-expanded="false">
            <span class="bell">üîî</span>
            <span class="notif-badge" id="notif-badge" aria-hidden="true">0</span>
          </div>

          {% if user.is_authenticated %}
            <div class="user-block" id="user-block">
              <div class="user-badge" id="user-badge">{{ user.username|slice:":1"|upper }}</div>
              <div class="user-info">
                <div class="user-name">{{ user.get_full_name|default:user.username }}</div>
                <div class="user-actions">
                  <form method="post" action="{% url 'logout' %}" style="display:block;">
                    {% csrf_token %}
                    <button type="submit" class="link-button">–í—ã–π—Ç–∏</button>
                  </form>
                </div>
              </div>
            </div>
          {% else %}
            <a class="top-action" href="{% url 'login' %}">–í–æ–π—Ç–∏</a>
            <a class="top-action" href="/register/">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
          {% endif %}
        </div>
      </header>

      <main class="content">
        {% block content %}{% endblock %}
      </main>
    </div>
  </div>

  <!-- Toast container -->
  <div id="toast-root" aria-live="polite" aria-atomic="true"></div>

  <!-- Notification center panel (—Å–∫—Ä—ã—Ç–∞—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
  <aside id="notification-center" class="notification-center" aria-hidden="true">
    <div class="nc-header">
      <h3>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
      <div class="nc-controls">
        <button id="nc-mark-read">–ü–æ–º–µ—Ç–∏—Ç—å –≤—Å–µ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ</button>
        <button id="nc-clear">–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
      </div>
    </div>
    <div id="nc-list" class="nc-list">
      <!-- –ò—Å—Ç–æ—Ä–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –±—É–¥–µ—Ç –æ—Ç—Ä–∏—Å–æ–≤–∞–Ω–∞ —Å—é–¥–∞ -->
    </div>
    <div class="nc-empty" id="nc-empty" style="display:none">–ü–æ–∫–∞ –Ω–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</div>
  </aside>

  <script>
    window.DJ_MESSAGES = [
      {% for m in messages %}
        {"tags":"{{ m.tags }}", "message":"{{ m|escapejs }}" }{% if not forloop.last %},{% endif %}
      {% empty %}{% endfor %}
    ];
  </script>

  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤–Ω–∏–∑—É (–≤ —Å—Ç—Ä–æ–≥–æ–º –ø–æ—Ä—è–¥–∫–µ) -->
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  <!-- jQuery (–Ω—É–∂–µ–Ω –≤–∞—à–µ–º—É inline-–∫–æ–¥—É) -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- Bootstrap 5 bundle (–≤–∫–ª—é—á–∞–µ—Ç Popper v2). –ü–æ–¥–∫–ª—é—á–∞–µ–º –û–î–ò–ù —Ä–∞–∑ -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script> -->

  <!-- –õ–æ–∫–∞–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Bootstrap/jQuery -->
  <script src="{% static 'js/captcha.js' %}"></script>
  <script src="{% static 'js/notifications.js' %}"></script>

  {% block scripts %}{% endblock %}
</body>
</html>
